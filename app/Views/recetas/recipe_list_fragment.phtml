<?php
/**
 * Este fragmento contiene la lista y la paginaciÃ³n. Se usa en SSR y en la respuesta AJAX.
 * Variables disponibles: $recetas, $totalPages, $currentPage
 */
?>
<div class="space-y-4">
    <?php if (!empty($recetas)): ?>
        <?php foreach ($recetas as $receta): ?>
            <div class="bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500 mb-4">
    <div class="flex justify-between items-center">
        <div>
            <h2 class="text-xl font-bold text-green-700"><?= htmlspecialchars($receta['titulo']) ?></h2>
            <p class="text-gray-600 mb-2"><?= htmlspecialchars($receta['descripcion']) ?></p>
        </div>

    </div>
    
    <div class="mt-3 pt-3 border-t border-gray-200">
        <h3 class="text-md font-semibold text-gray-700 mb-1">Ingredientes:</h3>
        <p class="text-sm text-gray-800 whitespace-pre-line">
            <?= nl2br(htmlspecialchars($receta['ingredientes_data'])) ?>
        </p>
    </div>

    <div class="mt-3 pt-3 border-t border-gray-200">
        <p class="text-lg font-bold text-green-600">Score Eco-Nutri: <?= htmlspecialchars($receta['sostenibilidad_score']) ?>/10</p>
    </div>
</div>
        <?php endforeach; ?>
    <?php else: ?>
        <p class="text-center text-gray-500 py-8">
            No se encontraron recetas.
        </p>
    <?php endif; ?>
</div>

<div class="mt-8 flex justify-center space-x-2">
    <?php if ($totalPages > 1): ?>
        <?php for ($i = 1; $i <= $totalPages; $i++): ?>
            <a href="/receta/index?page=<?= $i ?>" 
               class="pagination-link px-4 py-2 rounded-lg text-sm font-medium transition duration-150 ease-in-out 
               <?= ($i == $currentPage) ? 'bg-green-600 text-white shadow-lg' : 'bg-white text-gray-700 border hover:bg-gray-100' ?>">
                <?= $i ?>
            </a>
        <?php endfor; ?>
    <?php endif; ?>
</div>